<div class="bg-light lter b-b wrapper">
    <h1 class="h4 font-bold">
        <span>当前位置：</span>
        <span class="hcolor" ng-if="!nick">内部人员列表</span>
    </h1>
</div>
<div>

    <div class="pull-left m-l-md headpadd">
        <label>姓名</label>
        <input type="text" ng-model="search.name" class="input-sm bg-white no-border padder" >
    </div>
    <div class="pull-left m-l-md headpadd">
        <label>身份证号</label>
        <input type="text" ng-model="search.idcard" class="input-sm bg-white no-border padder" >
    </div>
    <div class="pull-left m-l-md headpadd">
        <label>手机号</label>
        <input type="text" ng-model="search.phone" class="input-sm bg-white no-border padder" >
    </div>

    <div class="pull-left m-r-sm headpadd m-l-sm">
        <select class="input-sm form-control" ng-model="search.agentlevel" ng-change="getdata()">
            <option value="" >部门</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
            <option value="1">广东省公安部</option>
        </select>
    </div>
    <div class="pull-left m-r-sm headpadd m-l-sm">
        <select class="input-sm form-control" ng-model="search.status" ng-change="getdata()">
            <option value="" >状态</option>
            <option value="1">正常</option>
            <option value="2">暂停</option>
        </select>
    </div>
    <div class="pull-left headpadd m-l-sm">
        <button  class="btn btn-sm btn-info" ng-click="">搜索</button>
    </div>
    <div class="pull-left headpadd m-l-sm">
        <button  class="btn btn-sm btn-info" ng-click="addMember()">新建</button>
    </div>
</div>

<div class="line b-b"></div>
<!--ng-style="{height:app.navHeight-200+'px'}"-->
<div style="margin: 0 10px 5px;position: relative;clear:both;">
    <!--loading-->
    <div ng-if="moreLoading">
        <div style="position:fixed;z-index:1;width:100%;height:100%; background:#eeeeee;opacity: 0.5;"></div>
        <div ng-if="!isSmartDevice"  style="position:absolute;z-index: 2;left: 0;right: 0;top: 49%;bottom: 0;margin:auto;">
            <div class="text-center"><img width="30px" src="./apps/common/img/loading.gif"></div>
        </div>
        <div ng-if="isSmartDevice"  style="position:fixed;z-index: 2;left: 50%;top: 22em;margin-left: -8px">
            <div class="text-center"><img width="30px" src="./apps/common/img/loading.gif"></div>
        </div>
    </div>
    <!--no data-->
    <div class="text-center" ng-if="nodata&&!isSmartDevice" style="position:absolute;z-index: 2;left: 0;right: 0;top: 49%;bottom: 0;margin:auto;">
        <span style="border: 1px solid  #aaaaaa;padding: 5px;border-radius: 10px;">{{'ag-grid.noRowsToShow'|translate}}</span>
    </div>
    <div class="text-center" ng-if="nodata&&isSmartDevice" style="position:fixed;z-index: 2;left: 50%;top: 22em;margin-left: -20px">
        <span style="border: 1px solid  #aaaaaa;padding: 5px;border-radius: 10px;">{{'ag-grid.noRowsToShow'|translate}}</span>
    </div>

    <div class="cttable" ng-if="!isSmartDevice">
        <!--【fixed-thead表头】-->
        <table class="form-table fixed-thead " cellpadding="0" cellspacing="0" >
            <tr class="thr tbcolor">
                <th>姓名</th>
                <th>身份证号</th>
                <th>手机号</th>
                <th>部门</th>
                <th>状态</th>
                <th>备注</th>
                <th>登记时间</th>
                <th>操作</th>
                <th style="width: 17px" ng-if="accounts.rows.length>16"></th>
            </tr>
        </table>
        <!--【fixed-thead表头】-->
        <!--【表身】-->
        <div class="scroll-box" ng-style="tablestyle">
            <table class="form-table table table-striped table-bordered mobiletable table-hover">
                <!--<tr ng-repeat="row in insiderList" class="active" ng-dblclick="edit(row._id)">-->
                    <!--<td>{{row.code}}</td>-->
                    <!--<td>{{row.user.account}}</td>-->
                    <!--<td>{{row.user.limitMobile || row.user.mobile}}</td>-->
                    <!--<td>{{row.user.name}}</td>-->
                    <!--&lt;!&ndash;<td ng-if="level==1"><button class="btn btn-info btn-sm" ng-click="updateRatio(row)">{{row.ratio}}</button></td>&ndash;&gt;-->
                    <!--<td>{{row.ratio}}</td>-->
                    <!--<td class="text-center" ><button class="btn btn-info btn-sm" ng-click="updatePwd(row)">重置密码</button></td>-->
                    <!--<td class="text-center" ><button class="btn btn-info btn-sm" ng-click="changeActive(row)">{{row.user.active==true?'封号':'激活'}}</button></td>-->
                    <!--<td>{{row.user.area}}</td>-->
                    <!--<td>{{row.user.crtime | date:'yyyy-MM-dd HH:mm:ss'}}</td>-->
                    <!--<td class="text-center"  ng-if="level == 0"><button class="btn btn-info btn-sm" ng-click="updateRatio(row)">更改分成比例</button></td>-->
                    <!--<td class="text-center" >-->
                        <!--<button class="btn btn-xs btn-primary" ng-click="details(row._id,row.user.account,users.agent.agent||1)" ng-if=" !accounts.agent || row.level<3">详情</button>-->
                    <!--</td>-->
                <!--</tr>-->

                <tr class="active" ng-dblclick="edit(row._id)">
                    <td>王晓理</td>
                    <td>1234567894564</td>
                    <td>12348916446</td>
                    <td>广东省公安部</td>
                    <!--<td ng-if="level==1"><button class="btn btn-info btn-sm" ng-click="updateRatio(row)">{{row.ratio}}</button></td>-->
                    <td>正常</td>
                    <td>。。。</td>
                    <td>{{'2018-4-10' | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                    <td class="text-center" >
                        <button class="btn btn-xs btn-primary" ng-click="addMember()">编辑</button>
                        <button class="btn btn-xs btn-danger" ng-click="delete()">删除</button>
                    </td>
                </tr>
            </table>
        </div>
        <!--【表身】-->
    </div>


    <div class="mobilebox" ng-if="isSmartDevice" ng-style="{height:app.navHeight-202+'px'}" ng-if="isSmartDevice">
        <div class="mobilehead">
            <table class="form-table fixed-thead " cellpadding="0" cellspacing="0" >
                <colgroup>
                    <col width="80px"/>
                    <col width="80px"/>
                    <col width="80px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="150px"/>
                    <col ng-if="level==0" width="120px"/>
                    <col width="80px"/>
                </colgroup>
                <tr>
                    <th>代理ID</th>
                    <th ng-if="teaHouseName">茶楼名称</th>
                    <th>账号</th>
                    <th>手机号</th>
                    <th>姓名</th>
                    <th>分成</th>
                    <th>操作</th>
                    <th>激活</th>
                    <th>地区</th>
                    <th>创建时间</th>
                    <th ng-if="level == 0">更新分成比例</th>
                    <th>下级详情</th>
                </tr>
            </table>
        </div>
        <div class="mobilebody" ng-style="{height:app.navHeight-265+'px'}">
            <table class="form-table table table-striped table-bordered table-hover">
                <colgroup>
                    <col width="80px"/>
                    <col width="80px"/>
                    <col width="80px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="120px"/>
                    <col width="150px"/>
                    <col ng-if="level==0" width="120px"/>
                    <col width="80px"/>
                </colgroup>
                <tr ng-repeat="row in accounts.rows" class="active" ng-dblclick="edit(row._id)">
                    <td>{{row.code}}</td>
                    <th ng-if="row.teaHouseName">{{row.teaHouseName}}</th>
                    <td>{{row.user.account}}</td>
                    <td>{{row.user.limitMobile || row.user.mobile}}</td>
                    <td>{{row.user.name}}</td>
                    <!--<td ng-if="level==1"><button class="btn btn-info btn-sm" ng-click="updateRatio(row)">{{row.ratio}}</button></td>-->
                    <td>{{row.ratio}}</td>
                    <td class="text-center" ><button class="btn btn-info btn-sm" ng-click="updatePwd(row)">重置密码</button></td>
                    <td class="text-center" ><button class="btn btn-info btn-sm" ng-click="changeActive(row)">{{row.user.active==true?'封号':'激活'}}</button></td>
                    <td>{{row.user.area}}</td>
                    <td>{{row.user.crtime | date:'yyyy-MM-dd HH:mm'}}</td>
                    <td class="text-center"   ng-if="level == 0"><button class="btn btn-info btn-sm" ng-click="updateRatio(row)">更改分成比例</button></td>
                    <td class="text-center" >
                        <button class="btn btn-xs btn-primary" ng-click="details(row._id,row.user.account,users.agent.agent||1)" ng-if=" !accounts.agent || row.level<3">详情</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!--ng-if="!isSmartDevice"-->
    <div ng-if="!isSmartDevice" style="position:absolute;z-index: 2;left: 0;right: 0;top: 101%;bottom: 0;margin:auto;">
        <div class="text-center">
            <div class="pull-left m-l-md">{{ pages!=0 ? (((page>0?(page-1):page)*(pageSize||20)+1)||0) : 0}} - {{(page*(pageSize||20) < total)?(page*(pageSize||20)):total||0}} / {{totalnumber||0}}</div>
            <button class="btn btn-default btn-sm" ng-click="getdata(1)" ng-disabled="pages ==0 || page==1">{{'ag-grid.first'|translate}}</button>
            <button class="btn btn-default btn-sm" ng-click="left()" ng-disabled="pages ==0 || page==1">{{'ag-grid.previous'|translate}}</button>
            <span>{{ pages==0 ? 0 : page}}/{{pages}}</span>
            <button class="btn btn-default btn-sm" ng-click="right()" ng-disabled="pages==0 || page==pages">{{'ag-grid.next'|translate}}</button>
            <button class="btn btn-default btn-sm" ng-click="getdata(pages)" ng-disabled="pages==0 || page==pages">{{'ag-grid.last'|translate}}</button>
        </div>
    </div>
    <div class="text-center" ng-if="!moreLoading&&!nodata&&isSmartDevice">
        <button class="btn btn-default btn-sm" ng-click="getdata(1)" ng-disabled="page==1">{{'ag-grid.first'|translate}}</button>
        <button class="btn btn-default btn-sm" ng-click="left()" ng-disabled="page==1">{{'ag-grid.previous'|translate}}</button>
        <span>{{ pages==0 ? 0:page }}/{{ pages }}</span>
        <button class="btn btn-default btn-sm" ng-click="right()" ng-disabled="pages==0 || page==pages">{{'ag-grid.next'|translate}}</button>
        <button class="btn btn-default btn-sm" ng-click="getdata(pages)" ng-disabled="pages==0 || page==pages">{{'ag-grid.last'|translate}}</button>
    </div>
</div>

<!--添加成员等级-->
<div class="modal fade" id="addMember" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <form class="bs-example form-horizontal">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">添加成员</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="col-xs-3 control-label">姓名</label>
                        <div class="col-xs-9">
                            <input type="text" class="form-control" ng-model="name" placeholder="姓名">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">身份证号</label>
                        <div class="col-xs-9">
                            <input type="text" class="form-control" ng-model="idcard" placeholder="身份证号">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">手机</label>
                        <div class="col-xs-9">
                            <input type="text" class="form-control" ng-model="phone" placeholder="手机">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">所属部门</label>
                        <div class="col-xs-9">
                            <select class="w-full input-sm" ng-model="department">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">状态</label>
                        <div class="col-xs-9">
                            <select class="w-full input-sm" ng-model="status">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-xs-3 control-label">备注</label>
                        <div class="col-xs-9">
                            <input type="text" class="form-control" ng-model="memo" placeholder="备注">
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="display: flex;text-align: center">
                    <div style="flex: 1">
                        <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>
                    </div>
                    <div style="flex: 1">
                        <button type="button" class="btn btn-info" ng-click="add()">确认</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
